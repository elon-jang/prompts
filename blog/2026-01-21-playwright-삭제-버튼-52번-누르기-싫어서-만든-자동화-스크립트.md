---
title: "[Playwright] ì‚­ì œ ë²„íŠ¼ 52ë²ˆ ëˆ„ë¥´ê¸° ì‹«ì–´ì„œ ë§Œë“  ìë™í™” ìŠ¤í¬ë¦½íŠ¸"
date: "2026-01-21"
tags: [playwright, automation, javascript, oauth]
---

# [Playwright] ì‚­ì œ ë²„íŠ¼ 52ë²ˆ ëˆ„ë¥´ê¸° ì‹«ì–´ì„œ ë§Œë“  ìë™í™” ìŠ¤í¬ë¦½íŠ¸ (feat. OAuth ë¡œê·¸ì¸ ëš«ê¸°)

> "ê°œë°œìì˜ 3ëŒ€ ë¯¸ë•ì€ ë‚˜íƒœ(Laziness), ì„±ê¸‰í•¨(Impatience), ì˜¤ë§Œ(Hubris)ì´ë‹¤." - ë˜ë¦¬ ì›”(Larry Wall)

ì–´ëŠ í‰í™”ë¡œìš´ ì˜¤í›„, QueryPie Knowledge í˜ì´ì§€ ê´€ë¦¬ í™”ë©´ì„ ë³´ë©° ê¹Šì€ í•œìˆ¨ì„ ë‚´ì‰¬ì—ˆìŠµë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ìƒì„±í–ˆë˜ 52ê°œì˜ ë°ì´í„°ê°€ ì €ë¥¼ ë¹„ì›ƒë“¯ ì¤„ì§€ì–´ ìˆì—ˆê¸° ë•Œë¬¸ì´ì£ .

ê° í•­ëª©ì„ ì‚­ì œí•˜ëŠ” í”„ë¡œì„¸ìŠ¤ëŠ” ë‹¤ìŒê³¼ ê°™ì•˜ìŠµë‹ˆë‹¤.

1. ë©”ë‰´ ë²„íŠ¼ í´ë¦­ (`...`)
2. 'Delete Source' ë©”ë‰´ í´ë¦­
3. ìµœì¢… í™•ì¸ ëª¨ë‹¬ì—ì„œ 'Delete' ë²„íŠ¼ í´ë¦­

**52ê°œ í•­ëª© Ã— 3ë²ˆì˜ í´ë¦­ = ì´ 156ë²ˆì˜ í´ë¦­.**
ë‹¨ìˆœ ë°˜ë³µ ë…¸ë™ì„ í˜ì˜¤í•˜ëŠ” ê°œë°œìë¡œì„œ, ì´ ì§“ì„ ì†ìœ¼ë¡œ í•  ìˆœ ì—†ì—ˆìŠµë‹ˆë‹¤.

*"ê°œë°œìëŠ” ê²Œìœ¼ë¥´ë‹¤. ê·¸ë˜ì„œ ìë™í™”í•œë‹¤."*

ì €ëŠ” ê³§ë°”ë¡œ **Playwright**ë¥¼ ì¼œê³  Claudeì—ê²Œ ë¬¼ì—ˆìŠµë‹ˆë‹¤. "ì´ê±° ìë™í™”í•  ìˆ˜ ìˆì§€?"

---

## 1. ë„êµ¬ì˜ ì„ íƒ: Playwright Codegen

ê°€ì¥ ë¨¼ì € êº¼ë‚´ ë“  ì¹´ë“œëŠ” Playwrightì˜ ê°•ë ¥í•œ ê¸°ëŠ¥ì¸ `codegen`ì´ì—ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì €ì—ì„œì˜ ë™ì‘ì„ ë…¹í™”í•´ ì½”ë“œë¡œ ë³€í™˜í•´ ì£¼ëŠ” ê¸°ëŠ¥ì´ì£ .

```bash
npx playwright codegen https://example.com

```

ë¸Œë¼ìš°ì €ì™€ Inspector ì°½ì´ ì—´ë¦¬ê³ , ì œê°€ í´ë¦­í•˜ëŠ” ëª¨ë“  ë™ì‘ì´ ì‹¤ì‹œê°„ìœ¼ë¡œ í”„ë¡œë•ì…˜ ë ˆë²¨ì˜ í…ŒìŠ¤íŠ¸ ì½”ë“œë¡œ ë³€í™˜ë©ë‹ˆë‹¤. ì…€ë ‰í„°(Selector)ë¥¼ ì¼ì¼ì´ ì°¾ì„ í•„ìš”ê°€ ì—†ìœ¼ë‹ˆ ì´ë³´ë‹¤ í¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ ê³§ë°”ë¡œ ì²« ë²ˆì§¸ ë‚œê´€ì— ë´‰ì°©í–ˆìŠµë‹ˆë‹¤.

## 2. ì²« ë²ˆì§¸ ë‚œê´€: OAuth ë¡œê·¸ì¸ê³¼ í”„ë¡œí•„ ì¶©ëŒ

ìë™í™” ëŒ€ìƒ ì„œë¹„ìŠ¤ëŠ” **Google OAuth + Okta MFA** ì¡°í•©ì„ ì‚¬ìš©í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤. ìë™í™” ë´‡ì—ê²ŒëŠ” ìµœì•…ì˜ ì²œì ì´ì£ .

Codegenì„ ì‚¬ìš©í•˜ë ¤ë©´ ë¡œê·¸ì¸ì´ ì„ í–‰ë˜ì–´ì•¼ í•˜ëŠ”ë°, ì´ë¯¸ Chromeì´ ì‹¤í–‰ ì¤‘ì¸ ìƒíƒœì—ì„œ Playwrightê°€ í”„ë¡œí•„ì— ì ‘ê·¼í•˜ë ¤ í•˜ë‹ˆ ì¶©ëŒì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

```
Error: Profile in use

```

"ìë™í™”ë¥¼ ìœ„í•´ ë„ì›Œë‘” 30ê°œì˜ íƒ­ì„ ëª¨ë‘ ë‹«ìœ¼ë¼ê³ ?"
ë¬¼ë¡  ê·¸ëŸ´ ìˆœ ì—†ì—ˆìŠµë‹ˆë‹¤.

### í•´ê²°ì±…: ë¸Œë¼ìš°ì € ê²©ë¦¬ (feat. Firefox)

í•´ê²°ì±…ì€ ì˜ì™¸ë¡œ ê°„ë‹¨í–ˆìŠµë‹ˆë‹¤. ì¼ìƒ ì—…ë¬´ëŠ” Chromeì—ì„œ, ìë™í™”ëŠ” **Firefox**ì—ì„œ ëŒë¦¬ëŠ” 'ì² ì €í•œ ë¶„ì—…'ì…ë‹ˆë‹¤.

```javascript
const { firefox } = require('playwright');
const browser = await firefox.launch({ headless: false });

```

ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ì ì€ Playwrightê°€ ì‚¬ìš©í•˜ëŠ” FirefoxëŠ” ì œ PCì— ì„¤ì¹˜ëœ ì‹œìŠ¤í…œ ë¸Œë¼ìš°ì €ê°€ ì•„ë‹ˆë¼, **Playwrightê°€ ìƒŒë“œë°•ìŠ¤ í˜•íƒœë¡œ ìì²´ ë‹¤ìš´ë¡œë“œí•œ ë°”ì´ë„ˆë¦¬**ë¼ëŠ” ê²ƒì…ë‹ˆë‹¤. ë•ë¶„ì— ê¸°ì¡´ Chrome ì„¸ì…˜ê³¼ì˜ ì¶©ëŒ ì—†ì´ ê¹”ë”í•œ í™˜ê²½ì„ ì–»ì„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

---

## 3. ë‘ ë²ˆì§¸ ë‚œê´€: ì¸ì¦ ìƒíƒœ ìœ ì§€ (Session Storage)

Firefoxë¡œ í™˜ê²½ì€ ë¶„ë¦¬í–ˆì§€ë§Œ, Playwrightì˜ ê²©ë¦¬ëœ í™˜ê²½ íƒ“ì— ë§¤ë²ˆ ë¡œê·¸ì¸ì„ ìƒˆë¡œ í•´ì•¼ í•˜ëŠ” ë¬¸ì œê°€ ë‚¨ì•˜ìŠµë‹ˆë‹¤. íŠ¹íˆ MFAê°€ ê±¸ë¦° OAuth ë¡œê·¸ì¸ì„ ìŠ¤í¬ë¦½íŠ¸ë¡œ ëš«ëŠ” ê±´ ë°°ë³´ë‹¤ ë°°ê¼½ì´ ë” í° ì‘ì—…ì…ë‹ˆë‹¤.

### ì „ëµ: ìˆ˜ë™ ë¡œê·¸ì¸ + ì„¸ì…˜ ìŠ¤ëƒ…ìƒ·

ì™„ì „ ìë™í™”ë¥¼ ê³ ì§‘í•˜ê¸°ë³´ë‹¤ í˜„ì‹¤ì ì¸ íƒ€í˜‘ì•ˆì„ ì„ íƒí–ˆìŠµë‹ˆë‹¤.
**"ìµœì´ˆ 1íšŒëŠ” ì‚¬ëŒì´ ì§ì ‘ ë¡œê·¸ì¸í•˜ê³ , ê·¸ ì„¸ì…˜ ì •ë³´ë¥¼ ì €ì¥í•´ì„œ ì¬ì‚¬ìš©í•˜ì."**

### Step 1. URL ë³€ê²½ ê°ì§€ë¡œ ë¡œê·¸ì¸ ì™„ë£Œ íŒë‹¨

í„°ë¯¸ë„ ì…ë ¥ì„ ê¸°ë‹¤ë¦¬ëŠ” ë°©ì‹(stdin)ì€ ë¸Œë¼ìš°ì € ìë™í™”ì™€ ì„ì˜€ì„ ë•Œ ë¶ˆì•ˆì •í–ˆìŠµë‹ˆë‹¤. ëŒ€ì‹  URLì´ ë¡œê·¸ì¸ í˜ì´ì§€ì—ì„œ ë©”ì¸ ì„œë¹„ìŠ¤ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ë˜ëŠ” ê²ƒì„ ê°ì§€í•˜ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

```javascript
// ë¡œê·¸ì¸ í˜ì´ì§€ë¼ë©´ ìˆ˜ë™ ë¡œê·¸ì¸ì„ ëŒ€ê¸°
const needsLogin = page.url().includes('login');

if (needsLogin) {
  console.log('â³ ë¸Œë¼ìš°ì €ì—ì„œ ë¡œê·¸ì¸ì„ ì§„í–‰í•´ì£¼ì„¸ìš”...');

  // OAuth -> Okta -> Redirect ê¹Œì§€ ì¶©ë¶„í•œ ì‹œê°„ ëŒ€ê¸°
  await page.waitForURL(targetUrl, { timeout: 300000 });

  // ë¡œê·¸ì¸ ì„±ê³µ í›„ ì„¸ì…˜ ì €ì¥
  await context.storageState({ path: 'auth.json' });
  console.log('ğŸ’¾ ì„¸ì…˜ ì €ì¥ ì™„ë£Œ!');
}

```

### Step 2. `storageState`ë¡œ ì˜í˜¼ê¹Œì§€ ë°±ì—…í•˜ê¸°

Playwrightì˜ `storageState` ë©”ì„œë“œëŠ” í˜„ì¬ ë¸Œë¼ìš°ì € ì»¨í…ìŠ¤íŠ¸ì˜ **ì¿ í‚¤(Cookies)**ì™€ **ë¡œì»¬ ìŠ¤í† ë¦¬ì§€(LocalStorage)**ë¥¼ í†µì§¸ë¡œ JSON íŒŒì¼ë¡œ ë¤í”„í•©ë‹ˆë‹¤.

```json
// auth.json ì˜ˆì‹œ
{
  "cookies": [
    { "name": "session_id", "value": "abc123...", "domain": ".querypie.com" },
    { "name": "auth_token", "value": "xyz789..." }
  ],
  "origins": [
    { "origin": "https://app.querypie.com", "localStorage": [...] }
  ]
}

```

ì´ì œ ë‹¤ìŒ ì‹¤í–‰ë¶€í„°ëŠ” ì´ íŒŒì¼ì„ ë¡œë“œí•˜ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤.

```javascript
// ì €ì¥ëœ ì„¸ì…˜ íŒŒì¼ì´ ì¡´ì¬í•˜ë©´ ë¡œë“œ
if (fs.existsSync('auth.json')) {
  context = await browser.newContext({ storageState: 'auth.json' });
}

```

### Step 3. ì„¸ì…˜ ë§Œë£Œ ì²˜ë¦¬ (Self-Healing)

ë§Œì•½ ì„¸ì…˜ì´ ë§Œë£Œë˜ì—ˆë‹¤ë©´? í˜ì´ì§€ëŠ” ë‹¤ì‹œ ë¡œê·¸ì¸ í™”ë©´ìœ¼ë¡œ íŠ•ê¸¸ ê²ë‹ˆë‹¤. ì´ë¥¼ ê°ì§€í•´ ë§Œë£Œëœ íŒŒì¼ì„ ì‚­ì œí•˜ê³  ë‹¤ì‹œ ìˆ˜ë™ ë¡œê·¸ì¸ì„ ìœ ë„í•˜ëŠ” ë¡œì§ì„ ì¶”ê°€í•˜ì—¬ ìŠ¤í¬ë¦½íŠ¸ì˜ ê²¬ê³ í•¨ì„ ë”í–ˆìŠµë‹ˆë‹¤.

---

## 4. ì‚­ì œ ë¡œì§ êµ¬í˜„: ì ‘ê·¼ì„± ì…€ë ‰í„°ì˜ ìŠ¹ë¦¬

ë¡œê·¸ì¸ ë¬¸ì œë¥¼ í•´ê²°í–ˆìœ¼ë‹ˆ, ë‚¨ì€ ê±´ ë°˜ë³µ ì‚­ì œë¿ì…ë‹ˆë‹¤. ì—¬ê¸°ì„œ Playwrightì˜ ì§„ê°€ê°€ ë°œíœ˜ë©ë‹ˆë‹¤.

```javascript
while (true) {
  // 'Open menu'ë¼ëŠ” ë¼ë²¨ì„ ê°€ì§„ ë²„íŠ¼ íƒìƒ‰
  const menuButtons = page.getByLabel('Open menu');

  // ë” ì´ìƒ ì‚­ì œí•  ë²„íŠ¼ì´ ì—†ìœ¼ë©´ ì¢…ë£Œ
  if (await menuButtons.count() === 0) break;

  await menuButtons.first().click();
  await page.getByRole('menuitem', { name: 'Delete Source' }).click();
  await page.getByRole('button', { name: 'Delete' }).click();

  // UI ê°±ì‹  ëŒ€ê¸° (Optional)
  await page.waitForTimeout(500);
}

```

### ğŸ’¡ Tip: `getByRole` & `getByLabel`

ê³¼ê±°ì—ëŠ” CSS í´ë˜ìŠ¤(`.btn-delete`, `.menu-item-3`)ë¥¼ ì‚¬ìš©í–ˆì§€ë§Œ, ì´ëŠ” ë””ìì¸ì´ ë³€ê²½ë˜ë©´ ì‰½ê²Œ ê¹¨ì§‘ë‹ˆë‹¤. ë°˜ë©´ **ì ‘ê·¼ì„±(Accessibility) ê¸°ë°˜ ì…€ë ‰í„°**ì¸ `getByLabel`, `getByRole`ì€ ìŠ¤í¬ë¦° ë¦¬ë”ë¥¼ ìœ„í•´ ì œê³µë˜ëŠ” ì†ì„±ì´ë¯€ë¡œ UIê°€ ë°”ë€Œì–´ë„ ìœ ì§€ë  ê°€ëŠ¥ì„±ì´ í›¨ì”¬ ë†’ìŠµë‹ˆë‹¤.

> "ì ‘ê·¼ì„±ì„ ì§€í‚¤ëŠ” ê²ƒì€ ì¥ì• ì¸ ì‚¬ìš©ìë¿ë§Œ ì•„ë‹ˆë¼, ìë™í™” ë´‡ì„ ë§Œë“œëŠ” ê°œë°œìì—ê²Œë„ ì¶•ë³µì…ë‹ˆë‹¤."

---

## ê²°ë¡ : 156ë²ˆì˜ í´ë¦­ì„ 6ì¤„ì˜ ì½”ë“œë¡œ

ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ì í„°ë¯¸ë„ì—ëŠ” ì•„ë¦„ë‹¤ìš´ ë¡œê·¸ê°€ ì°íˆê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤.

```
...
ğŸ—‘ï¸  50ê°œ ì‚­ì œë¨
ğŸ—‘ï¸  51ê°œ ì‚­ì œë¨
ğŸ—‘ï¸  52ê°œ ì‚­ì œë¨
ğŸ“Š ì´ 52ê°œ í•­ëª© ì‚­ì œ ì™„ë£Œ
âœ¨ Done!

```

156ë²ˆì˜ í´ë¦­ ë…¸ë™ì´ `node delete-script.js` ì—”í„° í•œ ë²ˆìœ¼ë¡œ í•´ê²°ë˜ì—ˆìŠµë‹ˆë‹¤. ì €ëŠ” íŒ”ì§±ì„ ë¼ê³  ì»¤í”¼ë¥¼ ë§ˆì‹œë©°, í™”ë©´ ì† ë°ì´í„°ê°€ ì‚¬ë¼ì§€ëŠ” ê²ƒì„ êµ¬ê²½ë§Œ í•˜ë©´ ë˜ì—ˆìŠµë‹ˆë‹¤.

### âœ… TIL (Today I Learned)

1. **Playwright Codegen**: ì´ˆê¸° ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œë¥¼ ì§œëŠ” ë° ìµœê³ ì˜ ë„êµ¬ë‹¤.
2. **ë¸Œë¼ìš°ì € ë¶„ë¦¬**: Chrome í”„ë¡œí•„ ì¶©ëŒì´ ë‚  ë•, ì¿¨í•˜ê²Œ Firefoxë¥¼ ì“°ì.
3. **URL ê¸°ë°˜ ê°ì§€**: OAuth ë¡œê·¸ì¸ íë¦„ ì œì–´ì—ëŠ” `waitForURL`ì´ ê°€ì¥ ì•ˆì •ì ì´ë‹¤.
4. **storageState**: í•œ ë²ˆ ë¡œê·¸ì¸í•œ ì„¸ì…˜ì„ ì €ì¥í•˜ë©´ ê°œë°œì˜ ì§ˆì´ ë‹¬ë¼ì§„ë‹¤.
5. **ì ‘ê·¼ì„± ì…€ë ‰í„°**: `getByRole`, `getByLabel`ì€ CSS ì…€ë ‰í„°ë³´ë‹¤ í›¨ì”¬ ê²¬ê³ (Robust)í•˜ë‹¤.

> **GitHub Repository**: [elon-jang/auto-delete](https://www.google.com/search?q=https://github.com/elon-jang/auto-delete)

ê²Œìœ¼ë¦„ì€ ë¯¸ë•ì…ë‹ˆë‹¤. ë‹¨, ê·¸ê²ƒì´ **'ìë™í™”'**ë¡œ ì´ì–´ì§ˆ ë•Œë§Œ ë§ì´ì£ .
